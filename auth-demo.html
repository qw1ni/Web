<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/styles.css">
    <title>Sneaker Store - Auth Demo</title>
    <style>
        .demo-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .demo-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .test-accounts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .account-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            background: #f8f9fa;
        }
        .account-card h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .account-card .role {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 10px;
        }
        .role-admin {
            background: #dc3545;
            color: white;
        }
        .role-manager {
            background: #ffc107;
            color: #333;
        }
        .role-customer {
            background: #28a745;
            color: white;
        }
        .account-info {
            margin: 10px 0;
        }
        .account-info strong {
            color: #666;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        .btn:hover {
            opacity: 0.8;
        }
        .current-user {
            background: #e7f3ff;
            border: 2px solid #667eea;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .current-user h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .current-user .user-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }
        .user-info-item {
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        .user-info-label {
            font-weight: bold;
            color: #666;
            font-size: 12px;
            text-transform: uppercase;
        }
        .user-info-value {
            color: #333;
            font-size: 14px;
        }
        .test-buttons {
            text-align: center;
            margin: 20px 0;
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.authenticated {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.not-authenticated {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div data-include="header"></div>

    <main class="content">
        <div class="demo-container">
            <div class="demo-header">
                <h1>üîê Auth System Demo</h1>
                <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —Ä–æ–ª–µ–π</p>
            </div>

            <!-- –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å -->
            <div class="demo-section">
                <h2 class="section-title">üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</h2>
                <div id="auth-status" class="status not-authenticated">
                    –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                </div>
                <div id="current-user-info" class="current-user" style="display: none;">
                    <h3>üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
                    <div class="user-info" id="user-details">
                    </div>
                </div>
            </div>

            <!-- –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã -->
            <div class="demo-section">
                <h2 class="section-title">üë• –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã</h2>
                <div class="test-accounts">
                    <div class="account-card">
                        <h3>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</h3>
                        <span class="role role-admin">Admin</span>
                        <div class="account-info">
                            <strong>Email:</strong> mike.johnson@example.com<br>
                            <strong>–ü–∞—Ä–æ–ª—å:</strong> password123<br>
                            <strong>–ü—Ä–∞–≤–∞:</strong> –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
                        </div>
                        <button class="btn btn-primary" onclick="loginAs('mike.johnson@example.com', 'password123')">
                            –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω
                        </button>
                    </div>
                    
                    <div class="account-card">
                        <h3>–ú–µ–Ω–µ–¥–∂–µ—Ä</h3>
                        <span class="role role-manager">Manager</span>
                        <div class="account-info">
                            <strong>Email:</strong> sarah.wilson@example.com<br>
                            <strong>–ü–∞—Ä–æ–ª—å:</strong> password123<br>
                            <strong>–ü—Ä–∞–≤–∞:</strong> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏
                        </div>
                        <button class="btn btn-primary" onclick="loginAs('sarah.wilson@example.com', 'password123')">
                            –í–æ–π—Ç–∏ –∫–∞–∫ –º–µ–Ω–µ–¥–∂–µ—Ä
                        </button>
                    </div>
                    
                    <div class="account-card">
                        <h3>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</h3>
                        <span class="role role-customer">Customer</span>
                        <div class="account-info">
                            <strong>Email:</strong> john.doe@example.com<br>
                            <strong>–ü–∞—Ä–æ–ª—å:</strong> password123<br>
                            <strong>–ü—Ä–∞–≤–∞:</strong> –ü–æ–∫—É–ø–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º
                        </div>
                        <button class="btn btn-primary" onclick="loginAs('john.doe@example.com', 'password123')">
                            –í–æ–π—Ç–∏ –∫–∞–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π -->
            <div class="demo-section">
                <h2 class="section-title">üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π</h2>
                <div class="test-buttons">
                    <button class="btn btn-primary" onclick="testAuth()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é</button>
                    <button class="btn btn-success" onclick="testRoles()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª–∏</button>
                    <button class="btn btn-danger" onclick="logout()">–í—ã–π—Ç–∏</button>
                </div>
                <div id="test-results"></div>
            </div>

            <!-- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
            <div class="demo-section">
                <h2 class="section-title">üìÑ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <h4>–û–±—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h4>
                        <a href="index.html" class="btn btn-primary">–ì–ª–∞–≤–Ω–∞—è</a><br>
                        <a href="login.html" class="btn btn-primary">–í—Ö–æ–¥</a><br>
                        <a href="register.html" class="btn btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    </div>
                    <div>
                        <h4>–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö</h4>
                        <a href="profile.html" class="btn btn-success">–ü—Ä–æ—Ñ–∏–ª—å</a><br>
                        <a href="api-example.html" class="btn btn-success">API Demo</a>
                    </div>
                    <div>
                        <h4>–î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤</h4>
                        <a href="manager.html" class="btn btn-success">Manager Panel</a>
                    </div>
                    <div>
                        <h4>–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</h4>
                        <a href="admin.html" class="btn btn-success">Admin Panel</a>
                    </div>
                </div>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ -->
            <div class="demo-section">
                <h2 class="section-title">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div>
                        <h4>üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h4>
                        <ul>
                            <li>–í–∞–ª–∏–¥–∞—Ü–∏—è email –∏ –ø–∞—Ä–æ–ª–µ–π</li>
                            <li>–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π</li>
                            <li>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</li>
                            <li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h4>
                        <ul>
                            <li><strong>Customer:</strong> –ü–æ–∫—É–ø–∫–∏, –ø—Ä–æ—Ñ–∏–ª—å</li>
                            <li><strong>Manager:</strong> + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</li>
                            <li><strong>Admin:</strong> + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üé® UI/UX</h4>
                        <ul>
                            <li>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω</li>
                            <li>–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</li>
                            <li>–†–æ–ª—å-–∑–∞–≤–∏—Å–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã</li>
                            <li>–ö—Ä–∞—Å–∏–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏</h4>
                        <ul>
                            <li>JSON Server API</li>
                            <li>LocalStorage/SessionStorage</li>
                            <li>–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</li>
                            <li>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div data-include="footer"></div>

    <script src="./scripts/partials.js"></script>
    <script src="./scripts/main.js"></script>
    <script src="./scripts/api.js"></script>
    <script src="./scripts/preloader.js"></script>
    <script src="./scripts/auth.js"></script>
    <script src="./scripts/cart.js"></script>
    
    <script>
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthStatus();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
            setInterval(updateAuthStatus, 1000);
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        function updateAuthStatus() {
            const authManager = window.SneakerStoreAuth.authManager;
            const statusElement = document.getElementById('auth-status');
            const userInfoElement = document.getElementById('current-user-info');
            const userDetailsElement = document.getElementById('user-details');
            
            if (authManager.isAuthenticated()) {
                const user = authManager.getCurrentUser();
                
                statusElement.textContent = `‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ ${user.firstName} ${user.lastName} (${user.role})`;
                statusElement.className = 'status authenticated';
                
                userInfoElement.style.display = 'block';
                userDetailsElement.innerHTML = `
                    <div class="user-info-item">
                        <div class="user-info-label">–ò–º—è</div>
                        <div class="user-info-value">${user.firstName} ${user.lastName}</div>
                    </div>
                    <div class="user-info-item">
                        <div class="user-info-label">Email</div>
                        <div class="user-info-value">${user.email}</div>
                    </div>
                    <div class="user-info-item">
                        <div class="user-info-label">–†–æ–ª—å</div>
                        <div class="user-info-value" style="text-transform: capitalize;">${user.role}</div>
                    </div>
                    <div class="user-info-item">
                        <div class="user-info-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</div>
                        <div class="user-info-value">${user.lastLogin ? new Date(user.lastLogin).toLocaleString() : '–ù–∏–∫–æ–≥–¥–∞'}</div>
                    </div>
                `;
            } else {
                statusElement.textContent = '‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω';
                statusElement.className = 'status not-authenticated';
                userInfoElement.style.display = 'none';
            }
        }

        // –í—Ö–æ–¥ –ø–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        async function loginAs(email, password) {
            try {
                const authManager = window.SneakerStoreAuth.authManager;
                const result = await authManager.login(email, password);
                
                if (result.success) {
                    showMessage('–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                    updateAuthStatus();
                } else {
                    showMessage('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + result.errors.join(', '), 'error');
                }
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞: ' + error.message, 'error');
            }
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        function testAuth() {
            const authManager = window.SneakerStoreAuth.authManager;
            const results = document.getElementById('test-results');
            
            let html = '<h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</h4><ul>';
            
            html += `<li>–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: ${authManager.isAuthenticated() ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</li>`;
            
            if (authManager.isAuthenticated()) {
                const user = authManager.getCurrentUser();
                html += `<li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.firstName} ${user.lastName}</li>`;
                html += `<li>Email: ${user.email}</li>`;
                html += `<li>–†–æ–ª—å: ${user.role}</li>`;
                html += `<li>ID: ${user.id}</li>`;
            }
            
            html += '</ul>';
            results.innerHTML = html;
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–µ–π
        function testRoles() {
            const authManager = window.SneakerStoreAuth.authManager;
            const results = document.getElementById('test-results');
            
            let html = '<h4>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–µ–π:</h4><ul>';
            
            html += `<li>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: ${authManager.isAdmin() ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</li>`;
            html += `<li>–ú–µ–Ω–µ–¥–∂–µ—Ä: ${authManager.isManager() ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</li>`;
            html += `<li>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å: ${authManager.hasRole('customer') ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}</li>`;
            
            if (authManager.isAuthenticated()) {
                const user = authManager.getCurrentUser();
                html += `<li>–¢–µ–∫—É—â–∞—è —Ä–æ–ª—å: ${user.role}</li>`;
                html += `<li>isAdmin —Ñ–ª–∞–≥: ${user.isAdmin ? '–î–∞' : '–ù–µ—Ç'}</li>`;
            }
            
            html += '</ul>';
            results.innerHTML = html;
        }

        // –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
        function logout() {
            const authManager = window.SneakerStoreAuth.authManager;
            authManager.logout();
            showMessage('–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω', 'success');
            updateAuthStatus();
        }

        // –ü–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `status ${type === 'success' ? 'authenticated' : 'not-authenticated'}`;
            messageDiv.textContent = message;
            
            const results = document.getElementById('test-results');
            results.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>
