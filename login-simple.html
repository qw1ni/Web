<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/styles.css">
    <title>Sneaker Store - –í—Ö–æ–¥</title>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <header class="header" style="position: absolute; top: 0; width: 100%;">
        <div class="header__container container">
            <a href="./index.html" class="header__logo" style="margin: 20px;">
                <img src="./images/Logo.svg" alt="Nike" loading="lazy" width="80" height="31">
            </a>
        </div>
    </header>

    <main class="content">
        <section class="auth">
            <div class="auth__container container">
                <div class="auth__card">
                    <h1 class="auth__title">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
                    <p class="auth__subtitle">–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ—Ä–∑–∏–Ω–µ –∏ –∑–∞–∫–∞–∑–∞–º</p>
                    
                    <form class="auth__form" id="login-form">
                        <label class="auth__label" for="login-email">Email</label>
                        <input class="auth__input" type="email" id="login-email" name="email" 
                               autocomplete="email" required placeholder="you@example.com">

                        <label class="auth__label" for="login-password">–ü–∞—Ä–æ–ª—å</label>
                        <input class="auth__input" type="password" id="login-password" name="password"
                               autocomplete="current-password" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">

                        <div class="auth__options">
                            <label class="auth__checkbox">
                                <input class="auth__checkbox-input" type="checkbox" id="login-remember" name="remember">
                                <span class="auth__checkbox-label">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
                            </label>
                        </div>

                        <button class="auth__button" type="submit">–í–æ–π—Ç–∏</button>
                    </form>
                    
                    <p class="auth__extra">
                        –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a class="auth__link" href="./register.html">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                    </p>
                    
                    <div id="message" style="margin-top: 15px; padding: 10px; border-radius: 5px; display: none;"></div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <h3 style="margin: 0 0 10px 0; font-size: 14px;">–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:</h3>
                        <p style="margin: 5px 0; font-size: 12px;">üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: mike.johnson@example.com / password123</p>
                        <p style="margin: 5px 0; font-size: 12px;">üìä –ú–µ–Ω–µ–¥–∂–µ—Ä: sarah.wilson@example.com / password123</p>
                        <p style="margin: 5px 0; font-size: 12px;">üõçÔ∏è –ü–æ–∫—É–ø–∞—Ç–µ–ª—å: john.doe@example.com / password123</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        
        // –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ö–æ–¥–∞
        const SESSION_KEY = 'sneaker_store_user_session';
        const API_URL = 'http://localhost:3000';

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const messageDiv = document.getElementById('message');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            showMessage('–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É...', 'info');
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
                const response = await fetch(`${API_URL}/users?email=${email}`);
                const users = await response.json();
                
                if (users.length === 0) {
                    showMessage('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    return;
                }
                
                const user = users[0];
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–æ–ª—å
                if (user.password === password) {
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–µ—Å—Å–∏—é
                    const session = {
                        id: user.id,
                        firstName: user.firstName,
                        lastName: user.lastName,
                        email: user.email,
                        role: user.role,
                        token: 'mock-jwt-token-' + Date.now()
                    };
                    
                    localStorage.setItem(SESSION_KEY, JSON.stringify(session));
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
                    showMessage(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.firstName}!`, 'success');
                    
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
                    setTimeout(() => {
                        if (user.role === 'admin') {
                            window.location.href = './admin.html';
                        } else if (user.role === 'manager') {
                            window.location.href = './manager.html';
                        } else {
                            window.location.href = './index.html';
                        }
                    }, 1000);
                } else {
                    showMessage('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                showMessage('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É', 'error');
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.style.display = 'block';
            
            if (type === 'success') {
                messageDiv.style.background = '#d4edda';
                messageDiv.style.color = '#155724';
                messageDiv.style.border = '1px solid #c3e6cb';
            } else if (type === 'error') {
                messageDiv.style.background = '#f8d7da';
                messageDiv.style.color = '#721c24';
                messageDiv.style.border = '1px solid #f5c6cb';
            } else {
                messageDiv.style.background = '#d1ecf1';
                messageDiv.style.color = '#0c5460';
                messageDiv.style.border = '1px solid #bee5eb';
            }
        }
    </script>
</body>
</html>
